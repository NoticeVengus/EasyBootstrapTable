/*! grunt_test - v1.0.0 - */

!function(a){a.fn.extend({bootstrapCustomTable:function(c){var d,e,f=1,g=!1;if(void 0===a(this).context._options&&void 0===c.idlist&&(b.idlist.list=[]),c=a.extend({},b,c),d=c,d.maintainPage||(f=d.pageNumber),null==c.url||null==c.columnsData)return!1;a(this).bootstrapTable("destroy");var h=new Array;if(d.checkbox){var i=new Object;i.checkbox=!0,h.push(i)}if(null==c.fieldData)for(var j=0;j<c.columnsData.length;++j){var k=new Object;k.field=c.columnsData[j].name,k.title=c.columnsData[j].name,k.align="center",k.visible=void 0===c.columnsData[j].hide||c.columnsData[j].hide,h.push(k)}else for(var j=0;j<c.columnsData.length;++j){var k=new Object;k.field=c.fieldData[j],k.title=c.columnsData[j].name,k.align="center",k.visible=void 0===c.columnsData[j].hide||!c.columnsData[j].hide,h.push(k)}a(this).bootstrapTable({url:c.url,method:"post",height:600,showColumns:!1,search:d.enableSearch,showRefresh:d.showRefresh,showToggle:!1,pagination:!0,maintainSelected:!0,cache:!0,sortable:!1,sidePagination:"server",pageNumber:f,pageSize:10,pageList:[10,25,50,100],singleSelect:!c.isMultiSelect,clickToSelect:c.isClickToSelect,undefinedText:"无数据",uniqueId:"id",queryParams:c.queryParams,rowStyle:c.rowStyle,columns:h}),e=a(this),g||(a("#bootstrap-table-search-input").attr("placeholder",c.searchText),a(this).on("check.bs.table",function(a,b){for(var d=0;d<c.idlist.list.length;++d)for(var e in b)if(e==c.idlist.key&&b[e]==c.idlist.list[d].id)return c.idlist.list[d].check=!0,!1;c.idlist.list.push({id:b.id,check:!0})}),a(this).on("uncheck.bs.table",function(a,b){for(var d=0;d<c.idlist.list.length;++d)for(var e in b)if(e==c.idlist.key&&b[e]==c.idlist.list[d].id)return c.idlist.list[d].check=!1,!1;c.idlist.list.push({id:b.id,check:!1})}),a(this).on("check-all.bs.table",function(a,b){for(var d=0;d<b.length;++d){for(var e=b[d],f=!1,g=0;g<c.idlist.list.length;++g){for(var h in e)if(h==c.idlist.key&&e[h]==c.idlist.list[g].id){c.idlist.list[g].check=!0,f=!0;break}if(f)break}f||c.idlist.list.push({id:e.id,check:!0})}}),a(this).on("uncheck-all.bs.table",function(a,b){for(var d=0;d<b.length;++d){for(var e=b[d],f=!1,g=0;g<c.idlist.list.length;++g){for(var h in e)if(h==c.idlist.key&&e[h]==c.idlist.list[g].id){c.idlist.list[g].check=!1,f=!0;break}if(f)break}f||c.idlist.list.push({id:e.id,check:!1})}}),d.maintainPage?a(this).on("page-change.bs.table",function(a,b,c){f=b}):(a(this).on("page-change.bs.table",function(a,b,c){}),f=1),d.enableSort&&a(this).on("load-success.bs.table",function(a,b){var c=e.find("thead").first();if(-1!=e.context._options.orderIndex){var d=c.find("th").eq(e.context._options.orderIndex).children().first(),f=c.find("span");void 0!==f&&f.length>0&&f.remove(),void 0!==d&&(0===e.context._options.orderDirection?d.append("<span class='glyphicon glyphicon-triangle-bottom' aria-hidden='true'></span>"):1===e.context._options.orderDirection&&d.append("<span class='glyphicon glyphicon-triangle-top' aria-hidden='true'></span>"))}}),d.enableButton&&a(this).on("post-body.bs.table",function(b){var c=e.find("tbody").find("tr");if(c.eq(0).find("td").length>1)for(var f=0;f<c.length;++f){var g=c.eq(f).find("td").last();g.addClass("bs-checkbox"),g.empty();var h=a("<div><button class='"+d.buttonClass+"' type='submit'>"+d.buttonText+"</button></div>");h.click(function(b){var c=e.bootstrapTable("getData",!0),d=a(this).parent().parent().index();return e.trigger("bootstrap-custom-table.btn",c[d]),!1}),g.append(h)}})),d.enableSort&&a(this).find("thead").click(function(a){var b=a.target.parentElement.cellIndex;void 0===b&&(b=a.target.parentElement.parentElement.cellIndex),void 0!==b&&e.trigger("bootstrap-custom-table.sort",b)}),g=!0,a(this).context._options=d,a(this).context.cPage=f},getCustomSelections:function(){return a(this).context._options.idlist.list},clearCustomSelections:function(){var b=a(this),c=b.context._options.idlist.list;for(var d in c)c[d].check=!1},refreshCustomTable:function(b){var c=a(this);void 0!==b&&b||(c.context._options.idlist.list=[]),c.bootstrapTable("selectPage",c.context.cPage)},setSortTag:function(b){var c=a(this);if(-1!=b){if(c.context._options.orderIndex!=b)c.context._options.orderDirection=0;else switch(c.context._options.orderDirection){case-1:c.context._options.orderDirection=0;break;case 0:c.context._options.orderDirection=1;break;case 1:c.context._options.orderDirection=-1}c.context._options.orderIndex=b}return c.context._options.orderDirection},getSortTag:function(){return a(this).context._options.orderDirection}});var b={url:"",queryParams:function(a){return a},columnsData:null,fieldData:null,isMultiSelect:!1,isClickToSelect:!0,rowStyle:function(a,c){for(var d=0;d<b.idlist.list.length;++d)if(b.idlist.list[d].id==a.id)return b.idlist.list[d].check?{checked:!0}:{};var e={id:a.id,check:!1};return b.idlist.list.push(e),e.check?{checked:!0}:{}},idlist:{key:"id",list:[]},pageNumber:1,maintainPage:!0,checkbox:!0,showRefresh:!1,enableSearch:!0,searchText:"搜索",enableSort:!1,orderIndex:-1,orderDirection:0,enableButton:!1,buttonText:"按钮",buttonClass:"btn btn-primary btn-xs"}}(window.jQuery);